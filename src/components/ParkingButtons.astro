---
const occupiedSpaces = [0,]; // <--- acá marcás los espacios ocupados
---

<div class="w-full max-w-4xl mx-auto mb-8">
  <h3 class="text-xl font-bold text-center mb-6 text-gray-100">Selecciona tu espacio dando click en el número</h3>
  <div class="grid grid-cols-6 sm:grid-cols-8 md:grid-cols-12 gap-3 p-6 bg-gray-800 rounded-lg shadow-2xl border border-gray-700">
    {Array.from({ length: 24 }, (_, i) => i + 1).map(num => {
      const isOccupied = occupiedSpaces.includes(num);
      return (
        <button 
          class={`parking-btn cursor-pointer font-bold py-3 px-4 rounded-lg transition-all duration-300 transform border focus:outline-none focus:ring-2 
            ${isOccupied 
              ? "bg-red-600 border-red-700 text-white cursor-not-allowed" 
              : "bg-gradient-to-r from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white border-green-500 hover:scale-105 hover:shadow-lg focus:ring-green-400"}`}
          data-space={num}
          disabled={isOccupied}
        >
          {num}
        </button>
      );
    })}
  </div>
  <!-- Leyenda -->
  <div class="flex items-center gap-6 mt-4 pl-6">
    <div class="flex items-center gap-2">
      <div class="w-5 h-5 bg-green-600 rounded"></div>
      <span class="text-gray-200 text-sm">Disponible</span>
    </div>
    <div class="flex items-center gap-2">
      <div class="w-5 h-5 bg-red-600 rounded"></div>
      <span class="text-gray-200 text-sm">Ocupado</span>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const buttons = document.querySelectorAll('.parking-btn');
    buttons.forEach(btn => {
      btn.addEventListener('click', (e) => {
        const button = btn as HTMLButtonElement;
        if (button.disabled) return;
        const target = e.target as HTMLElement | null;
        const spaceNumber = target ? target.getAttribute('data-space') : null;
        window.dispatchEvent(new CustomEvent('openReservationModal', { 
          detail: { spaceNumber } 
        }));
      });
    });
  });
</script>
